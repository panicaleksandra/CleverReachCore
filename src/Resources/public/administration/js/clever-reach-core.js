!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/bundles/cleverreachcore/",t(t.s="Uf2I")}({IJyO:function(e,n){e.exports='{% block clever_reach_dashboard %}\n    <div class="clever-reach-dashboard" xmlns="http://www.w3.org/1999/html">\n        <div>\n            <img :src="\'/cleverreachshopware6/administration/img/clever_reach_logo.jpg\' | asset"\n                 class="clever-reach-dashboard-img">\n            <span class="clever-reach-dashboard-span">Client Id: {{ clientId }}</span>\n        </div>\n        <div class="clever-reach-dashboard-child">\n            <div>\n                Sync Status: <br><br><br><br>\n                <span :class="(syncStatus === \'In progress\') ? \'clever-reach-dashboard-orange\' :\n                                ((syncStatus === \'Done\') ? \'clever-reach-dashboard-green\' : \'clever-reach-dashboard-red\')">\n                    {{ syncStatus }}\n                </span>\n            </div>\n            <div class="clever-reach-dashboard-button-div">\n                <button class="clever-reach-dashboard-button" id="manual-sync-button">Synchronize</button>\n            </div>\n        </div>\n\n    </div>\n{% endblock %}\n'},LEV8:function(e,n){e.exports='{% block clever_reach_landing %}\n<div class="clever-reach-landing" xmlns="http://www.w3.org/1999/html">\n    <div>\n        <img :src="\'/cleverreachshopware6/administration/img/clever_reach_logo.jpg\' | asset" class="clever-reach-landing-img">\n    </div>\n    <div class="clever-reach-landing-child">\n        <div>\n            <img :src="\'/cleverreachshopware6/administration/img/clever_reach_mail.svg\' | asset" class="clever-reach-landing-img-mail">\n        </div>\n        <div class="clever-reach-landing-content">\n            <h2>Welcome to CLeverReach</h2>\n            <p>Connect, sync customer data and create</p>\n            <p>appealing emails to showcase your</p>\n            <p>products to your customers.</p>\n        </div>\n        <div class="clever-reach-landing-button-div">\n            <button class="clever-reach-landing-button" id="connect-button">Connect</button>\n        </div>\n    </div>\n</div>\n{% endblock %}'},MdbH:function(e,n,t){},O0Aj:function(e,n,t){},SZ7m:function(e,n,t){"use strict";function r(e,n){for(var t=[],r={},a=0;a<n.length;a++){var c=n[a],o=c[0],s={id:e+":"+a,css:c[1],media:c[2],sourceMap:c[3]};r[o]?r[o].parts.push(s):t.push(r[o]={id:o,parts:[s]})}return t}t.r(n),t.d(n,"default",(function(){return v}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},o=a&&(document.head||document.getElementsByTagName("head")[0]),s=null,i=0,l=!1,u=function(){},d=null,h="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(e,n,t,a){l=t,d=a||{};var o=r(e,n);return f(o),function(n){for(var t=[],a=0;a<o.length;a++){var s=o[a];(i=c[s.id]).refs--,t.push(i)}n?f(o=r(e,n)):o=[];for(a=0;a<t.length;a++){var i;if(0===(i=t[a]).refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete c[i.id]}}}}function f(e){for(var n=0;n<e.length;n++){var t=e[n],r=c[t.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](t.parts[a]);for(;a<t.parts.length;a++)r.parts.push(m(t.parts[a]));r.parts.length>t.parts.length&&(r.parts.length=t.parts.length)}else{var o=[];for(a=0;a<t.parts.length;a++)o.push(m(t.parts[a]));c[t.id]={id:t.id,refs:1,parts:o}}}}function g(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function m(e){var n,t,r=document.querySelector("style["+h+'~="'+e.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(p){var a=i++;r=s||(s=g()),n=b.bind(null,r,a,!1),t=b.bind(null,r,a,!0)}else r=g(),n=C.bind(null,r),t=function(){r.parentNode.removeChild(r)};return n(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;n(e=r)}else t()}}var y,S=(y=[],function(e,n){return y[e]=n,y.filter(Boolean).join("\n")});function b(e,n,t,r){var a=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=S(n,a);else{var c=document.createTextNode(a),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(c,o[n]):e.appendChild(c)}}function C(e,n){var t=n.css,r=n.media,a=n.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute(h,n.id),a&&(t+="\n/*# sourceURL="+a.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},Uf2I:function(e,n,t){"use strict";t.r(n);var r=t("YjKH"),a=t.n(r);Shopware.Component.register("clever-reach-index",{template:a.a,inject:["loginService","syncService"],mounted:function(){this.getCurrentRoute({})},methods:{getCurrentRoute:function(e){var n=this,t={Authorization:"Bearer ".concat(this.loginService.getToken())};return this.syncService.httpClient.get("/cleverreach/router",{headers:t}).then((function(t){var r={name:"clever.reach.index",params:{page:Shopware.Classes.ApiService.handleResponse(t).page},query:e};n.$router.replace(r)})).catch((function(e){}))}}});var c=t("IJyO"),o=t.n(c);t("gbOU");Shopware.Component.register("clever-reach-dashboard",{template:o.a,inject:["loginService","syncService"],data:function(){return{syncStatus:"In progress",clientId:"",checkStatus:""}},mounted:function(){this.checkStatus=setInterval(this.getSyncInfo,500),document.getElementById("manual-sync-button").addEventListener("click",this.startManualSync)},methods:{getSyncInfo:function(){var e=this,n={Authorization:"Bearer ".concat(this.loginService.getToken())};return this.syncService.httpClient.get("/cleverreach/getsyncstatus",{headers:n}).then((function(n){e.clientId=Shopware.Classes.ApiService.handleResponse(n).clientId,e.syncStatus=Shopware.Classes.ApiService.handleResponse(n).syncStatus,"Done"!==e.syncStatus&&"Error"!==e.syncStatus||clearInterval(e.checkStatus)})).catch((function(e){console.log("error")}))},startManualSync:function(){var e={Authorization:"Bearer ".concat(this.loginService.getToken())};return this.syncService.httpClient.get("/cleverreach/manualsync",{headers:e}).then((function(e){console.log("ok")})).catch((function(e){console.log("error")}))}}});var s=t("LEV8"),i=t.n(s);t("d6VS");Shopware.Component.register("clever-reach-landing",{template:i.a,inject:["loginService","syncService"],data:function(){return{authStatus:!1,popup:"",url:""}},mounted:function(){var e=this,n=document.getElementById("connect-button");this.getUrl(),n.addEventListener("click",(function(){e.authStatus=setInterval(e.getAuthStatus,500),e.popup=window.open(e.url,"popup","location=yes,height=570,width=900,scrollbars=yes,status=yes")}))},methods:{getAuthStatus:function(){var e=this,n={Authorization:"Bearer ".concat(this.loginService.getToken())};return this.syncService.httpClient.get("/cleverreach/status",{headers:n}).then((function(n){if(Shopware.Classes.ApiService.handleResponse(n).status){e.$router.replace({name:"clever.reach.index",params:{page:"dashboard"}}),clearInterval(e.authStatus),e.popup.close()}})).catch((function(e){console.log("error")}))},getUrl:function(){var e=this,n={Authorization:"Bearer ".concat(this.loginService.getToken())};return this.syncService.httpClient.get("/cleverreach/geturl",{headers:n}).then((function(n){e.url=Shopware.Classes.ApiService.handleResponse(n).returnUrl})).catch((function(e){}))}}}),Shopware.Module.register("clever-reach",{type:"plugin",name:"cleverreach-sync.pluginTitle",title:"clever-reach-sync.general.mainMenuItemGeneral",description:"clever-reach-sync.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",icon:"default-chart-heart-puls",routes:{index:{component:"clever-reach-index",path:":page"}},navigation:[{label:"CleverReach",color:"#ffa2ef",path:"clever.reach.index",parent:"sw-marketing"}]})},YjKH:function(e,n){e.exports="{% block clever_reach_index %}\n    <clever-reach-landing v-if=\"this.$route.params.page==='landing'\"/>\n    <clever-reach-dashboard v-else-if=\"this.$route.params.page==='dashboard'\"/>\n{% endblock %}\n"},d6VS:function(e,n,t){var r=t("O0Aj");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,t("SZ7m").default)("43400c66",r,!0,{})},gbOU:function(e,n,t){var r=t("MdbH");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,t("SZ7m").default)("a418ac60",r,!0,{})}});